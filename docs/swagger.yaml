openapi: 3.0.3
info:
  title: Parking & Charger API
  version: 1.0.0
  description: 주차장 및 충전소 검색/상세조회 API 문서

paths:
  /api/parkings:
    get:
      summary: 주차장 또는 충전소 목록 조회
      description: |
        사용자가 조건을 선택해 주차장/충전소 목록을 조회합니다.  
        - `ev_charger=true`일 경우 충전소 목록  
        - `ev_charger=false`일 경우 일반 주차장 목록
      parameters:
        - name: page
          in: query
          description: 현재 페이지 번호
          required: false
          schema:
            type: integer
            default: 1
        - name: size
          in: query
          description: 한 페이지에 표시할 항목 수
          required: false
          schema:
            type: integer
            default: 10
        - name: sort
          in: query
          description: 정렬 기준 필드명 (예: distance_km, price_per_hour)
          required: false
          schema:
            type: string
            default: distance_km
        - name: order
          in: query
          description: 정렬 순서 (asc 또는 desc)
          required: false
          schema:
            type: string
            enum: [asc, desc]
            default: asc
        - name: congestion
          in: query
          description: 혼잡도 필터 (예: low, medium, high)
          required: false
          schema:
            type: string
        - name: ev_charger
          in: query
          description: 충전소 여부 필터 (`true` → 충전소, `false` → 일반 주차장)
          required: false
          schema:
            type: string
            enum: [true, false]
            default: false
        - name: keyword
          in: query
          description: 검색어 (주차장 이름 또는 주소)
          required: false
          schema:
            type: string
      responses:
        "200":
          description: 성공적으로 목록을 불러왔습니다.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  message:
                    type: string
                    example: parking 정보를 불러왔습니다.
                  data:
                    type: object
                    properties:
                      type:
                        type: string
                        example: parking
                      total_count:
                        type: integer
                        example: 15
                      page:
                        type: integer
                        example: 1
                      size:
                        type: integer
                        example: 10
                      results:
                        type: array
                        items:
                          type: object
                          properties:
                            parking_id:
                              type: integer
                              example: 1
                            parking_name:
                              type: string
                              example: 국립한밭대학교
                            address:
                              type: string
                              example: 대전광역시 유성구 대학로 125
                            price_per_hour:
                              type: integer
                              example: 1500
                            total_spots:
                              type: integer
                              example: 10
                            available_spots:
                              type: integer
                              example: 3
                            distance_km:
                              type: number
                              format: float
                              example: 0.5
                            ev_charger:
                              type: boolean
                              example: false
                            congestion:
                              type: string
                              example: medium
        "400":
          description: 잘못된 요청 파라미터

  /api/parkings/{id}:
    get:
      summary: 주차장 또는 충전소 상세 조회
      description: 특정 ID의 주차장 또는 충전소 상세 정보를 조회합니다.
      parameters:
        - name: id
          in: path
          required: true
          description: 주차장 또는 충전소 ID
          schema:
            type: integer
      responses:
        "200":
          description: 상세 정보를 성공적으로 불러왔습니다.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  message:
                    type: string
                    example: 주차장 정보를 불러왔습니다.
                  data:
                    type: object
                    properties:
                      parking_id:
                        type: integer
                        example: 1
                      parking_name:
                        type: string
                        example: 국립한밭대학교
                      address:
                        type: string
                        example: 대전광역시 유성구 대학로 125
                      price_per_hour:
                        type: integer
                        example: 1500
                      total_spots:
                        type: integer
                        example: 10
                      available_spots:
                        type: integer
                        example: 3
                      distance_km:
                        type: number
                        example: 0.5
                      ev_charger:
                        type: boolean
                        example: false
                      type:
                        type: string
                        example: parking
        "404":
          description: 해당 ID의 주차장 또는 충전소를 찾을 수 없습니다.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: fail
                  message:
                    type: string
                    example: 주차장 또는 충전소 정보를 불러올 수 없습니다.
                  error_code:
                    type: string
                    example: NOT_FOUND